<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>BoardMate - Boardgame Reservation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- Side Menu -->
  <aside id="sideMenu" class="side-menu">
    <div class="side-menu__header">
      <div class="brand-logo">
        <img src="boardmate_logo_noBG.png" alt="BoardMate">
      </div>
      <h2 class="side-title">BoardMate</h2>
      <button class="close-btn" onclick="toggleMenu(false)">√ó</button>
    </div>
  <!-- Side Menu -->
  <aside id="sideMenu" class="side-menu">
    <div class="side-menu__header">
      <div class="brand-logo">
        <img src="boardmate_logo_noBG.png" alt="BoardMate">
      </div>
      <h2 class="side-title">BoardMate</h2>
      <button class="close-btn" onclick="toggleMenu(false)">√ó</button>
    </div>

    <nav class="side-menu__nav">
      <button class="side-link" onclick="showPage('home')">Home</button>
      <button class="side-link" onclick="showPage('my-booking'); loadMyBookings();">Your Booking</button>
      <button class="side-link" onclick="showPage('favorites')">Favorite Game</button>
      <button class="side-link" onclick="showPage('settings')">Setting</button>
      <button class="side-link" onclick="showPage('profile')">Profile</button>
      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô admin (‡πÉ‡∏´‡πâ JS ‡πÄ‡∏≠‡∏≤ hidden ‡∏≠‡∏≠‡∏Å) -->
      <button id="adminMenuLink" class="side-link hidden" onclick="openAdminDashboard()">Admin Dashboard</button>
    </nav>

    <div class="side-menu__footer">
      <button class="logout-btn" onclick="handleLogout()">Logout</button>
    </div>
  </aside>

  <div id="overlay" class="overlay" onclick="toggleMenu(false)"></div>

  <div id="overlay" class="overlay" onclick="toggleMenu(false)"></div>

  <!-- Top Bar -->
  <header id="topBar" class="top-bar">
    <button class="icon-btn" onclick="toggleMenu(true)">‚ò∞</button>
    <h1 id="pageTitle" class="top-bar__title">BoardMate</h1>
    <div class="top-bar__actions">
      <span id="adminBadge" class="admin-badge hidden">Admin</span>
      <button class="icon-btn" onclick="showPage('profile')">üë§</button>
    </div>
  </header>

  <main class="app-container">

    <!-- AUTH -->
    <section id="auth" class="page page--active">
      <div class="auth-shell">
        <!-- hero ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ -->
        <div class="auth-hero">
          <div class="brand-logo-large">
            <img src="boardmate_logo_noBG.png" alt="BoardMate">
          </div>
          <div class="auth-badge">Board Game Hub</div>
          <h2>Welcome to BoardMate</h2>
          <p>Play, book, and enjoy your favorite games</p>
          <div class="hero-img hero-img--board"></div>
        </div>

        <!-- 1) ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
        <div id="authChoice" class="auth-card">
          <h3>Get Started</h3>
          <p class="muted">Choose an option to continue</p>
          <button class="btn btn-primary btn-full" onclick="showAuth('login')">Login</button>
          <button class="btn btn-secondary btn-full" onclick="showAuth('signup')">Sign Up</button>
        </div>

        <!-- 2) ‡∏´‡∏ô‡πâ‡∏≤ Login -->
        <div id="loginBox" class="auth-card hidden">
          <h3>Login</h3>
          <form id="loginForm" class="form-block">
            <label>Email</label>
            <input type="email" name="email" placeholder="Enter email" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="Enter password" required>

            <button type="submit" class="btn btn-primary btn-full">Login</button>
          </form>
          <p class="muted small-text">
            Don‚Äôt have an account? <a href="#" onclick="showAuth('signup')">Sign up</a>
          </p>
          <button class="btn btn-light btn-full" onclick="showAuth('choice')">Back</button>
        </div>

        <!-- 3) ‡∏´‡∏ô‡πâ‡∏≤ Sign up -->
        <div id="signupBox" class="auth-card hidden">
          <h3>Create Account</h3>
          <form id="signupForm" class="form-block">
            <label>Full name</label>
            <input type="text" name="full_name" placeholder="Your name" required>

            <label>Email</label>
            <input type="email" name="email" placeholder="you@example.com" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="At least 6 characters" required>

            <button type="submit" class="btn btn-primary btn-full">Sign Up</button>
          </form>
          <p class="muted small-text admin-register-link">
            Have an invite code?
            <button type="button" class="link-btn" onclick="showAdminRegister()">Admin register</button>
          </p>
          <p class="muted small-text">
            Already have an account? <a href="#" onclick="showAuth('login')">Login</a>
          </p>
          <button class="btn btn-light btn-full" onclick="showAuth('choice')">Back</button>
        </div>
      </div>
    </section>

    <!-- ADMIN REGISTER -->
    <section id="admin-register" class="page">
      <div class="auth-shell">
        <div class="auth-hero admin-register-hero">
          <div class="auth-badge">Invite only</div>
          <h2>Become a BoardMate admin</h2>
          <p>Unlock management tools with your invite code.</p>
          <div class="hero-img hero-img--board"></div>
        </div>
        <div class="auth-card">
          <h3>Admin registration</h3>
          <p class="muted small-text">Enter your invite code to continue</p>
          <form id="adminRegisterForm" class="form-block">
            <label>Full name</label>
            <input type="text" name="full_name" placeholder="Your name" required>

            <label>Email</label>
            <input type="email" name="email" placeholder="admin@boardmate.com" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="At least 6 characters" required>

            <label>Admin invite code</label>
            <input type="text" name="admin_invite_code" placeholder="BOARDMATE-XXXX" required>

            <button type="submit" class="btn btn-primary btn-full">Register as admin</button>
          </form>
          <button type="button" class="btn btn-light btn-full" onclick="returnToAuth()">Back to login</button>
        </div>
      </div>
    </section>

    <!-- HOME -->
    <section id="home" class="page">
      <div class="home-hero">
        <div>
          <p class="hero-badge">Today‚Äôs picks</p>
          <h2 class="hero-title">Find your boardgame table.</h2>
          <p class="muted">Choose room ‚Ä¢ Select game ‚Ä¢ Pay ‚Ä¢ Play</p>
        </div>
        <div class="hero-img hero-img--home">
          
        </div>
      </div>

      <div class="section-spacing">
        <div class="search-box">
          <span class="search-icon">üîé</span>
          <input type="text" id="searchInput" placeholder="Search boardgame...">
        </div>
        <div class="home-visual">
          <img src="Hero.jpg" alt="BoardMate players enjoying board games">
        </div>

        <h3 class="section-title">Recommended</h3>
        <div id="recommendedList" class="horizontal-scroll"></div>

        <h3 class="section-title">Popular Games</h3>
        <div id="popularList" class="card-grid card-grid--auto"></div>
      </div>

      <div class="bottom-bar">
        <button id="bookRoomBtn" type="button" class="btn btn-primary btn-full" onclick="startBooking()"> Start Booking </button>
      </div>
    </section>

    <!-- ROOM BOOKING -->
    <section id="room-booking" class="page">
      <div class="page-header">
        <h2>Room Booking</h2>
        <p class="muted">Select the room that fits your players.</p>
      </div>
      <div class="section-spacing section-spacing--nobot">
        <label class="field-label">Number of players</label>
        <input type="number" id="playerCount" class="input" placeholder="e.g. 4">
        <h3 class="section-title">Available Rooms</h3>
        <div id="roomList" class="vertical-list"></div>
      </div>
    </section>

    <!-- TIME SELECT -->
    <section id="time-select" class="page">
      <div class="page-header">
        <h2>Choose time</h2>
        <p class="muted">Select date and time for your booking.</p>
      </div>
      <div class="section-spacing">
        <label class="field-label">Date</label>
        <input type="date" id="bookingDate" class="input">

        <div class="time-slot-panel">
          <h4>Available slots</h4>
          <div id="timeSlotGrid" class="time-slot-grid">
            <!-- JS ‡∏à‡∏∞‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ -->
          </div>
        </div>

        <div class="time-grid">
          <div>
            <label class="field-label">Start time</label>
            <select id="startTime" class="input"></select>
          </div>
          <div>
            <label class="field-label">End time</label>
            <select id="endTime" class="input"></select>
          </div>
        </div>

        <p class="muted small-text" id="timeSummary">Duration: -</p>

        <button class="btn btn-primary btn-full" onclick="confirmTime()">Continue</button>
        <button class="btn btn-light btn-full" onclick="showPage('room-booking')">Back</button>
      </div>
    </section>

    <!-- GAME SELECT -->
    <section id="game-select" class="page">
      <div class="page-header">
        <h2>Select Game</h2>
        <p class="muted">Choose the boardgame you want to play.</p>
      </div>
      <div class="section-spacing" id="gameList"></div>
    </section>

    <!-- PAYMENT -->
    <section id="payment" class="page">
      <div class="page-header">
        <h2>Payment Summary</h2>
        <p class="muted">Check your booking details</p>
      </div>
      <div class="section-spacing">
        <div class="payment-warning">‚ÄúPlease complete your payment to lock your booking.<br>
          Right now, your booking is not secured yet.‚Äù</div>
        <div class="summary-box">
          <div class="summary-row">
            <span>Room</span>
            <strong id="summaryRoom">-</strong>
          </div>
          <div class="summary-row">
            <span>Game</span>
            <strong id="summaryGame">-</strong>
          </div>
          <div class="summary-row">
            <span>Date</span>
            <strong id="summaryDate">-</strong>
          </div>
          <div class="summary-row">
            <span>Time</span>
            <strong id="summaryTime">-</strong>
          </div>
          <div class="summary-row">
            <span>Duration</span>
            <strong id="summaryDuration">-</strong>
          </div>
          <div class="summary-row summary-row--total">
            <span>Total</span>
            <strong id="summaryTotal">0 THB</strong>
          </div>
        </div>

        <h3 class="section-title mt-16">Payment method</h3>
        <label class="pay-option">
          <input type="radio" name="payment_method" value="qr" checked onchange="toggleSummaryPaymentMethod('qr')">
          <span>QR Code</span>
        </label>
        <label class="pay-option">
          <input type="radio" name="payment_method" value="card" onchange="toggleSummaryPaymentMethod('card')">
          <span>Credit / Debit Card</span>
        </label>

        <div id="paymentSummaryMethodArea">
          <div id="paymentSummaryQR" class="qr-area">
            <div class="qr-frame">
              <div class="qr-square"></div>
            </div>
            <p class="muted">Scan this QR to pay</p>
          </div>

          <div id="paymentSummaryCard" style="display:none; margin-top: .6rem;">
            <label class="field-label">Card number</label>
            <input id="summaryCardNumber" type="text" class="input" placeholder="1234 5678 9012 3456">
            <label class="field-label">CVV</label>
            <input id="summaryCardCvv" type="text" class="input" placeholder="123">
          </div>
        </div>

        <button class="btn btn-primary btn-full" onclick="confirmPayment()">Confirm payment</button>
      </div>
    </section>

    <!-- PAYMENT SUCCESS -->
    <section id="payment-success" class="page">
      <div class="center-box">
        <div class="success-circle">‚úì</div>
        <h2>Payment successful</h2>
        <p class="muted">Your booking has been confirmed.</p>
        <button class="btn btn-primary" onclick="showPage('review')">Rate experience</button>
        <button class="btn btn-light" onclick="showPage('home')">Back to home</button>
      </div>
    </section>

    <!-- REVIEW -->
    <section id="review" class="page">
      <div class="page-header">
        <h2>How was your experience?</h2>
        <p class="muted">Give rating & comment</p>
      </div>
      <div class="section-spacing">
        <div id="starRow" class="star-row">
          <span data-rate="1">‚òÖ</span>
          <span data-rate="2">‚òÖ</span>
          <span data-rate="3">‚òÖ</span>
          <span data-rate="4">‚òÖ</span>
          <span data-rate="5">‚òÖ</span>
        </div>
        <label class="field-label">Comment</label>
        <textarea id="commentBox" rows="4" class="input" placeholder="Write your feedback..."></textarea>
        <button class="btn btn-primary" onclick="submitReview()">Submit</button>
      </div>
    </section>

    <!-- MY BOOKING -->
    <section id="my-booking" class="page">
      <div class="page-header">
        <h2>Your booking</h2>
        <p class="muted">Check your current bookings</p>
      </div>
      <div class="section-spacing">
        <div id="myBookingList" class="vertical-list">
          <!-- Bookings will be rendered here by loadMyBookings() -->
        </div>
        <div id="myBookingEmpty" class="muted" style="text-align: center; margin-top: 2rem;">
          No bookings yet. <a href="#" onclick="showPage('home'); return false;">Start a new booking</a>
        </div>
      </div>
      <div id="qrModal" class="qr-modal">
        <div class="qr-modal__content">
          <div class="qr-frame qr-frame--green">
            <div class="qr-square"></div>
          </div>
          <button class="btn btn-light" onclick="toggleQR(false)">Close</button>
        </div>
      </div>
      <!-- Payment modal for selecting QR or Card when paying a booking -->
      <div id="paymentModal" class="qr-modal" style="display: none;">
        <div class="qr-modal__content" style="width: 340px; max-width: 95%;">
          <h3>Complete payment</h3>
          <div style="margin: .6rem 0;">
            <label class="pay-option"><input type="radio" name="modal_payment_method" value="qr" checked onchange="toggleModalPaymentMethod('qr')"> <span>QR Code</span></label>
            <label class="pay-option"><input type="radio" name="modal_payment_method" value="card" onchange="toggleModalPaymentMethod('card')"> <span>Credit / Debit Card</span></label>
          </div>

          <div id="modalQR" class="qr-area">
            <div class="qr-frame">
              <div class="qr-square"></div>
            </div>
            <p class="muted">Scan this QR to pay</p>
          </div>

          <div id="modalCard" style="display:none;">
            <label class="field-label">Card number</label>
            <input id="modalCardNumber" type="text" class="input" placeholder="1234 5678 9012 3456">
            <label class="field-label">CVV</label>
            <input id="modalCardCvv" type="text" class="input" placeholder="123">
          </div>

          <div style="margin-top:.8rem; display:flex; gap:.5rem; justify-content:flex-end;">
            <button class="btn btn-light" onclick="closePaymentModal()">Cancel</button>
            <button class="btn btn-primary" onclick="confirmModalPayment()">Confirm payment</button>
          </div>
        </div>
      </div>
    </section>

    <!-- FAVORITES -->
    <section id="favorites" class="page">
      <div class="page-header">
        <h2>Favorite games</h2>
        <p class="muted">Your saved boardgames</p>
      </div>
      <div class="section-spacing">
        <p class="muted">No favorite yet.</p>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="profile" class="page">
      <div class="page-header">
        <h2>Profile</h2>
      </div>
      <div class="section-spacing">
        <div class="avatar-placeholder"></div>
        <form class="form-block mt-16">
          <label>Username</label>
          <input type="text" class="input" placeholder="username">
          <label>Email</label>
          <input type="email" class="input" placeholder="email">
          <label>Password</label>
          <input type="password" class="input" placeholder="new password">
          <button class="btn btn-primary">Update</button>
        </form>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settings" class="page">
      <div class="page-header">
        <h2>Settings</h2>
      </div>
      <div class="section-spacing">
        <label class="toggle-row">
          <span>Dark mode</span>
          <input type="checkbox">
        </label>
        <label class="toggle-row">
          <span>Notification</span>
          <input type="checkbox" checked>
        </label>
      </div>
    </section>

    <!-- ADMIN DASHBOARD -->
    <section id="admin-dashboard" class="page">
      <div class="page-header admin-header">
        <div>
          <h2>Admin dashboard</h2>
          <p class="muted">Manage bookings, rooms, and boardgames</p>
        </div>
        <span class="badge-soft">Admin tools</span>
      </div>

      <div class="admin-section">
        <div class="admin-section__head">
          <h3>Bookings overview</h3>
          <button class="btn btn-light" onclick="adminLoadBookings()">Refresh</button>
        </div>
        <div id="adminBookingsList" class="admin-card-list"></div>
        <div id="adminBookingsEmpty" class="muted center-text">No booking data</div>
      </div>

      <div class="admin-section">
        <div class="admin-section__head">
          <h3>Rooms management</h3>
          <button class="btn btn-light" onclick="adminLoadRooms()">Refresh</button>
        </div>
        <div id="adminRoomsList" class="admin-card-grid"></div>
        <div id="adminRoomsEmpty" class="muted center-text">No rooms found</div>
      </div>

      <div class="admin-section">
        <div class="admin-section__head">
          <h3>Boardgames management</h3>
          <button class="btn btn-light" onclick="adminLoadBoardgames()">Refresh</button>
        </div>
        <form id="adminBoardgameForm" class="admin-boardgame-form">
          <input type="text" name="game_name" placeholder="Game name" required>
          <input type="text" name="genre" placeholder="Genre">
          <input type="number" name="players_min" placeholder="Min players" min="1" value="2" required>
          <input type="number" name="players_max" placeholder="Max players" min="1" value="4" required>
          <select name="is_active">
            <option value="1" selected>Active</option>
            <option value="0">Inactive</option>
          </select>
          <button type="submit" class="btn btn-primary">Add boardgame</button>
        </form>
        <div id="adminBoardgamesList" class="admin-card-list"></div>
        <div id="adminBoardgamesEmpty" class="muted center-text">No boardgames yet</div>
      </div>
    </section>

  </main>

  <!-- Toast notification container -->
  <div id="toastContainer"></div>

<script src="./script.js?v=fix-2025-11-10-01"></script>
</body>

</html>
