<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>BoardMate - Boardgame Reservation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- Side Menu -->
  <aside id="sideMenu" class="side-menu">
    <div class="side-menu__header">
      <div class="brand-logo">
        <img src="boardmate_logo_noBG.png" alt="BoardMate">
      </div>
      <h2 class="side-title">BoardMate</h2>
      <button class="close-btn" onclick="toggleMenu(false)">√ó</button>
    </div>
    <nav class="side-menu__nav">
      <button class="side-link" onclick="showPage('home')">Home</button>
      <button class="side-link" onclick="showPage('my-booking'); loadMyBookings();">Your Booking</button>
      <button id="adminDashboardLink" class="side-link hidden" onclick="openAdminDashboard()">Admin Dashboard</button>
      <button class="side-link" onclick="showPage('settings')">Setting</button>
      <button class="side-link" onclick="showPage('profile')">Profile</button>
    </nav>
    <div class="side-menu__footer">
      <button class="logout-btn" onclick="logoutUser()">Logout</button>
    </div>
  </aside>
  <div id="overlay" class="overlay" onclick="toggleMenu(false)"></div>

  <!-- Top Bar -->
  <header id="topBar" class="top-bar">
    <button class="icon-btn" onclick="toggleMenu(true)">‚ò∞</button>
    <div class="top-bar__center">
      <h1 id="pageTitle" class="top-bar__title">BoardMate</h1>
      <span id="adminBadge" class="admin-badge hidden">Admin</span>
    </div>
    <button class="icon-btn" onclick="showPage('profile')">üë§</button>
  </header>

  <main class="app-container">

    <!-- AUTH -->
    <section id="auth" class="page page--active">
      <div class="auth-shell">
        <!-- hero ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ -->
        <div class="auth-hero">
          <div class="brand-logo-large">
            <img src="boardmate_logo_noBG.png" alt="BoardMate">
          </div>
          <div class="auth-badge">Board Game Hub</div>
          <h2>Welcome to BoardMate</h2>
          <p>Play, book, and enjoy your favorite games</p>
          <div class="hero-img hero-img--board"></div>
        </div>

        <!-- 1) ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
        <div id="authChoice" class="auth-card">
          <h3>Get Started</h3>
          <p class="muted">Choose an option to continue</p>
          <button class="btn btn-primary btn-full" onclick="showAuth('login')">Login</button>
          <button class="btn btn-secondary btn-full" onclick="showAuth('signup')">Sign Up</button>
        </div>

        <!-- 2) ‡∏´‡∏ô‡πâ‡∏≤ Login -->
        <div id="loginBox" class="auth-card hidden">
          <h3>Login</h3>
          <form id="loginForm" class="form-block">
            <label>Email</label>
            <input type="email" name="email" placeholder="Enter email" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="Enter password" required>

            <button type="submit" class="btn btn-primary btn-full">Login</button>
          </form>
          <p class="muted small-text">
            Don‚Äôt have an account? <a href="#" onclick="showAuth('signup')">Sign up</a>
          </p>
          <button class="btn btn-light btn-full" onclick="showAuth('choice')">Back</button>
        </div>

        <!-- 3) ‡∏´‡∏ô‡πâ‡∏≤ Sign up -->
        <div id="signupBox" class="auth-card hidden">
          <h3>Create Account</h3>
          <form id="signupForm" class="form-block">
            <label>Full name</label>
            <input type="text" name="full_name" placeholder="Your name" required>

            <label>Email</label>
            <input type="email" name="email" placeholder="you@example.com" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="At least 6 characters" required>

            <button type="submit" class="btn btn-primary btn-full">Sign Up</button>
          </form>
          <p class="muted small-text admin-link-note">
            Staff member? <button type="button" class="text-link-btn" onclick="showAdminRegister()">Admin register</button>
          </p>
          <p class="muted small-text">
            Already have an account? <a href="#" onclick="showAuth('login')">Login</a>
          </p>
          <button class="btn btn-light btn-full" onclick="showAuth('choice')">Back</button>
        </div>
      </div>
    </section>

    <!-- ADMIN REGISTER -->
    <section id="admin-register" class="page">
      <div class="auth-shell">
        <div class="auth-hero">
          <div class="brand-logo-large">
            <img src="boardmate_logo_noBG.png" alt="BoardMate">
          </div>
          <div class="auth-badge">Admin Access</div>
          <h2>Manage BoardMate</h2>
          <p>Unlock bookings, rooms, and boardgames control</p>
          <div class="hero-img hero-img--board"></div>
        </div>

        <div class="auth-card">
          <h3>Admin Registration</h3>
          <p class="muted small-text">Use your invite code to become an admin.</p>
          <form id="adminRegisterForm" class="form-block">
            <label>Full name</label>
            <input type="text" name="full_name" placeholder="Your name" required>

            <label>Email</label>
            <input type="email" name="email" placeholder="you@boardmate.com" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="At least 6 characters" required>

            <label>Admin Invite Code</label>
            <input type="text" name="admin_invite_code" placeholder="Enter invite code" required>

            <button type="submit" class="btn btn-primary btn-full">Register as Admin</button>
          </form>
          <p class="muted small-text">
            Already registered? <a href="#" onclick="returnToAuthFromAdmin('login')">Go to login</a>
          </p>
          <button class="btn btn-light btn-full" type="button" onclick="returnToAuthFromAdmin()">Back</button>
        </div>
      </div>
    </section>

    <!-- HOME -->
    <section id="home" class="page">
      <div class="home-hero">
        <div>
          <p class="hero-badge">Today‚Äôs picks</p>
          <h2 class="hero-title">Find your boardgame table.</h2>
          <p class="muted">Choose room ‚Ä¢ Select game ‚Ä¢ Pay ‚Ä¢ Play</p>
        </div>
        <div class="hero-img hero-img--home">
          
        </div>
      </div>

      <div class="section-spacing">
        <div class="search-box">
          <span class="search-icon">üîé</span>
          <input type="text" id="searchInput" placeholder="Search boardgame...">
        </div>
        <div class="home-visual">
          <img src="Hero.jpg" alt="BoardMate players enjoying board games">
        </div>

        <h3 class="section-title">Recommended</h3>
        <div id="recommendedList" class="horizontal-scroll"></div>

        <h3 class="section-title">Popular Games</h3>
        <div id="popularList" class="card-grid card-grid--auto"></div>
      </div>

      <div class="bottom-bar">
        <button id="bookRoomBtn" type="button" class="btn btn-primary btn-full" onclick="startBooking()"> Start Booking </button>
      </div>
    </section>

    <!-- ROOM BOOKING -->
    <section id="room-booking" class="page">
      <div class="page-header">
        <h2>Room Booking</h2>
        <p class="muted">Select the room that fits your players.</p>
      </div>
      <div class="section-spacing section-spacing--nobot">
        <label class="field-label">Number of players</label>
        <input type="number" id="playerCount" class="input" placeholder="e.g. 4">
        <h3 class="section-title">Available Rooms</h3>
        <div id="roomList" class="vertical-list"></div>
      </div>
    </section>

    <!-- TIME SELECT -->
    <section id="time-select" class="page">
      <div class="page-header">
        <h2>Choose time</h2>
        <p class="muted">Select date and time for your booking.</p>
      </div>
      <div id="selectedRoomSummary" class="selected-room-summary hidden">
        <div id="selectedRoomSummaryImage" class="room-thumb room-thumb--wide"></div>
        <div class="selected-room-summary__info">
          <h3 id="selectedRoomSummaryName">Room</h3>
          <p class="muted" id="selectedRoomSummaryDetail">-</p>
        </div>
      </div>
      <div class="section-spacing">
        <label class="field-label">Date</label>
        <input type="date" id="bookingDate" class="input">

        <div class="time-slot-panel">
          <h4>Available slots</h4>
          <div id="timeSlotGrid" class="time-slot-grid">
            <!-- JS ‡∏à‡∏∞‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ -->
          </div>
        </div>

        <div class="time-grid">
          <div>
            <label class="field-label">Start time</label>
            <select id="startTime" class="input"></select>
          </div>
          <div>
            <label class="field-label">End time</label>
            <select id="endTime" class="input"></select>
          </div>
        </div>

        <p class="muted small-text" id="timeSummary">Duration: -</p>

        <button class="btn btn-primary btn-full" onclick="confirmTime()">Continue</button>
        <button class="btn btn-light btn-full" onclick="showPage('room-booking')">Back</button>
      </div>
    </section>

    <!-- GAME SELECT -->
    <section id="game-select" class="page">
      <div class="page-header">
        <h2>Select Game</h2>
        <p class="muted">Choose the boardgame you want to play.</p>
      </div>
      <div class="section-spacing" id="gameList"></div>
    </section>
    
    <!-- GAME DETAIL -->
    <section id="game-detail" class="page">
      <div class="page-header">
        <h2 id="detailGameName">Game name</h2>
        <p class="muted">Game overview</p>
      </div>

      <div class="section-spacing">
        <div class="game-detail-shell">
          <div class="game-detail-media">
            <div id="detailGameImage" class="game-detail-img"></div>
          </div>

          <div class="game-detail-meta">
            <div class="game-detail-pill-row">
              <span class="tag" id="detailGameGenre">Genre</span>
              <span class="tag" id="detailGamePlayers">2‚Äì4 players</span>
            </div>
            <p class="muted small-text">
              This game is available in BoardMate. You can pick it when booking a room.
            </p>
          </div>
        </div>

        <div class="game-detail-howto">
          <h3>How to play</h3>
          <p id="detailGameHowToPlay" class="muted"></p>
        </div>

        <div class="game-detail-actions">
          <button type="button" class="btn btn-light" onclick="showPage('home')">
            Back to Home
          </button>
          <button type="button" class="btn btn-primary" onclick="startBookingFromGameDetail()">
            Choose this game when booking
          </button>
        </div>
      </div>
    </section>

    <!-- PAYMENT -->
    <section id="payment" class="page">
      <div class="page-header">
        <h2>Payment Summary</h2>
        <p class="muted">Check your booking details</p>
      </div>
      <div class="section-spacing">
        <div class="payment-warning">‚ÄúPlease complete your payment to lock your booking.<br>
          Right now, your booking is not secured yet.‚Äù</div>
        <div class="summary-box">
          <div class="summary-row">
            <span>Room</span>
            <strong id="summaryRoom">-</strong>
          </div>
          <div class="summary-row">
            <span>Game</span>
            <strong id="summaryGame">-</strong>
          </div>
          <div class="summary-row">
            <span>Date</span>
            <strong id="summaryDate">-</strong>
          </div>
          <div class="summary-row">
            <span>Time</span>
            <strong id="summaryTime">-</strong>
          </div>
          <div class="summary-row">
            <span>Duration</span>
            <strong id="summaryDuration">-</strong>
          </div>
          <div class="summary-row summary-row--total">
            <span>Total</span>
            <strong id="summaryTotal">0 THB</strong>
          </div>
        </div>

        <h3 class="section-title mt-16">Payment method</h3>
        <label class="pay-option">
          <input type="radio" name="payment_method" value="qr" checked onchange="toggleSummaryPaymentMethod('qr')">
          <span>QR Code</span>
        </label>
        <label class="pay-option">
          <input type="radio" name="payment_method" value="card" onchange="toggleSummaryPaymentMethod('card')">
          <span>Credit / Debit Card</span>
        </label>

        <div id="paymentSummaryMethodArea">
          <div id="paymentSummaryQR" class="qr-area">
            <div class="qr-frame">
              <div class="qr-square"></div>
            </div>
            <p class="muted">Scan this QR to pay</p>
          </div>

          <div id="paymentSummaryCard" style="display:none; margin-top: .6rem;">
            <label class="field-label">Card number</label>
            <input id="summaryCardNumber" type="text" class="input" placeholder="1234 5678 9012 3456">
            <label class="field-label">CVV</label>
            <input id="summaryCardCvv" type="text" class="input" placeholder="123">
          </div>
        </div>

        <button class="btn btn-primary btn-full" onclick="confirmPayment()">Confirm payment</button>
      </div>
    </section>

    <!-- PAYMENT SUCCESS -->
    <section id="payment-success" class="page">
      <div class="center-box">
        <div class="success-circle">‚úì</div>
        <h2>Payment successful</h2>
        <p class="muted">Your booking has been confirmed.</p>
        <button class="btn btn-primary" onclick="showPage('review')">Rate experience</button>
        <button class="btn btn-light" onclick="showPage('home')">Back to home</button>
      </div>
    </section>

    <!-- REVIEW -->
    <section id="review" class="page">
      <div class="page-header">
        <h2>How was your experience?</h2>
        <p class="muted">Give rating & comment</p>
      </div>
      <div class="section-spacing">
        <div id="starRow" class="star-row">
          <span data-rate="1">‚òÖ</span>
          <span data-rate="2">‚òÖ</span>
          <span data-rate="3">‚òÖ</span>
          <span data-rate="4">‚òÖ</span>
          <span data-rate="5">‚òÖ</span>
        </div>
        <label class="field-label">Comment</label>
        <textarea id="commentBox" rows="4" class="input" placeholder="Write your feedback..."></textarea>
        <button class="btn btn-primary" onclick="submitReview()">Submit</button>
      </div>
    </section>

    <!-- MY BOOKING -->
    <section id="my-booking" class="page">
      <div class="page-header">
        <h2>Your booking</h2>
        <p class="muted">Check your current bookings</p>
      </div>
      <div class="section-spacing">
        <div id="myBookingList" class="vertical-list">
          <!-- Bookings will be rendered here by loadMyBookings() -->
        </div>
        <div id="myBookingEmpty" class="muted" style="text-align: center; margin-top: 2rem;">
          No bookings yet. <a href="#" onclick="showPage('home'); return false;">Start a new booking</a>
        </div>
      </div>
      <div id="qrModal" class="qr-modal">
        <div class="qr-modal__content">
          <div class="qr-frame qr-frame--green">
            <div class="qr-square"></div>
          </div>
          <button class="btn btn-light" onclick="toggleQR(false)">Close</button>
        </div>
      </div>
      <!-- Payment modal for selecting QR or Card when paying a booking -->
      <div id="paymentModal" class="qr-modal" style="display: none;">
        <div class="qr-modal__content" style="width: 340px; max-width: 95%;">
          <h3>Complete payment</h3>
          <div style="margin: .6rem 0;">
            <label class="pay-option"><input type="radio" name="modal_payment_method" value="qr" checked onchange="toggleModalPaymentMethod('qr')"> <span>QR Code</span></label>
            <label class="pay-option"><input type="radio" name="modal_payment_method" value="card" onchange="toggleModalPaymentMethod('card')"> <span>Credit / Debit Card</span></label>
          </div>

          <div id="modalQR" class="qr-area">
            <div class="qr-frame">
              <div class="qr-square"></div>
            </div>
            <p class="muted">Scan this QR to pay</p>
          </div>

          <div id="modalCard" style="display:none;">
            <label class="field-label">Card number</label>
            <input id="modalCardNumber" type="text" class="input" placeholder="1234 5678 9012 3456">
            <label class="field-label">CVV</label>
            <input id="modalCardCvv" type="text" class="input" placeholder="123">
          </div>

          <div style="margin-top:.8rem; display:flex; gap:.5rem; justify-content:flex-end;">
            <button class="btn btn-light" onclick="closePaymentModal()">Cancel</button>
            <button class="btn btn-primary" onclick="confirmModalPayment()">Confirm payment</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ADMIN DASHBOARD -->
    <section id="admin-dashboard" class="page">
      <div class="page-header">
        <h2>Admin Dashboard</h2>
        <p class="muted">Monitor bookings, rooms, and boardgames.</p>
      </div>
      <div class="section-spacing admin-dashboard">
        <div class="admin-section">
          <div class="admin-section__head">
            <div>
              <h3>Bookings overview</h3>
              <p class="muted small-text">Latest room usage from customers</p>
            </div>
            <button class="btn btn-light" type="button" onclick="adminLoadBookings()">Refresh</button>
          </div>
          <div id="adminBookingsList" class="admin-list">
            <p class="muted small-text">No booking data loaded yet.</p>
          </div>
        </div>

        <div class="admin-section">
          <div class="admin-section__head">
            <div>
              <h3>Rooms management</h3>
              <p class="muted small-text">Adjust price and status</p>
            </div>
            <button class="btn btn-light" type="button" onclick="adminLoadRooms()">Refresh</button>
          </div>
          <div id="adminRoomsList" class="admin-list">
            <p class="muted small-text">No room data loaded yet.</p>
          </div>
        </div>

        <div class="admin-section admin-section--full">
          <div class="admin-section__head">
            <div>
              <h3>Boardgames management</h3>
              <p class="muted small-text">Create, update, or delete games</p>
            </div>
            <button class="btn btn-light" type="button" onclick="adminLoadBoardgames()">Refresh</button>
          </div>
          <form id="adminAddBoardgameForm" class="admin-form">
            <h4>Add a new boardgame</h4>
            <label class="field-label">Game name</label>
            <input type="text" name="game_name" class="input" placeholder="e.g. Azul" required>

            <label class="field-label">Genre</label>
            <input type="text" name="genre" class="input" placeholder="e.g. Abstract" required>

            <div class="admin-form__row">
              <div>
                <label class="field-label">Min players</label>
                <input type="number" name="players_min" class="input" min="1" value="2" required>
              </div>
              <div>
                <label class="field-label">Max players</label>
                <input type="number" name="players_max" class="input" min="1" value="4" required>
              </div>
            </div>

            <label class="field-label">Status</label>
            <select name="is_active" class="input">
              <option value="1" selected>Active</option>
              <option value="0">Inactive</option>
            </select>

            <label class="field-label">How to play</label>
            <textarea name="how_to_play" class="input" rows="4" placeholder="Step-by-step instructions"></textarea>

            <button type="submit" class="btn btn-primary btn-full">Add boardgame</button>
          </form>
          <div id="adminBoardgamesList" class="admin-list">
            <p class="muted small-text">No boardgame data loaded yet.</p>
          </div>
        </div>
      </div>
    </section>

  

    <!-- PROFILE -->
    <section id="profile" class="page">
      <div class="page-header">
        <h2>Profile</h2>
      </div>
      <div class="section-spacing">
        <div class="avatar-placeholder"></div>
      


        <div class="profile-block mt-16">
          <div class="profile-row">
            <div>
              <label class="field-label">Username</label>
              <div id="profileName" class="profile-value">-</div>
            </div>
            <button type="button" class="btn-link" onclick="openEditName()">Edit name</button>
          </div>

          <div class="profile-row">
            <div>
              <label class="field-label">Email</label>
              <div id="profileEmail" class="profile-value">-</div>
            </div>
            <button type="button" class="btn-link" onclick="openEditEmail()">Edit email</button>
          </div>

          <div class="profile-row">
            <div>
              <label class="field-label">Password</label>
              <div class="profile-value">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
            </div>
            <button type="button" class="btn-link" onclick="openChangePassword()">Change password</button>
          </div>
        </div>

        <button type="button" class="btn btn-light mt-24" onclick="showPage('home')">
          Back to home
        </button>
        <button type="button" class="btn btn-danger mt-12" onclick="deleteAccount()">
          Delete account
        </button>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settings" class="page">
      <div class="page-header">
        <h2>Settings</h2>
      </div>
      <div class="section-spacing">
        <label class="toggle-row">
          <span>Dark mode</span>
          <input type="checkbox" id="darkModeToggle">
        </label>
        <label class="toggle-row">
          <span>Notification</span>
          <input type="checkbox" checked>
        </label>
      </div>
    </section>

  </main>

  <!-- Toast notification container -->
  <div id="toastContainer"></div>

<script src="./script.js?v=fix-2025-11-10-01"></script>
</body>

</html>
